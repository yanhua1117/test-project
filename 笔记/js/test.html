<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8"/>
    <title>弹窗效果样式</title>
    <script type="text/javascript">
        var timer = null;
        var alpha = 30;

        window.onload = function(){
            
            var oDiv = document.getElementById("div1");
            
            // oDiv.onmouseover = function(){
            //     startMove(0);
            // }
            // oDiv.onmouseout = function(){
            //     startMove(-150);
            // }

            //startMove(600);

            oDiv.onmouseover = function(){
                startMove(100);
            }
            oDiv.onmouseout = function(){
                startMove(30);
            }
            
        }

        window.onscroll = function(){
            var oDiv = document.getElementById("div1");
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;

            //oDiv.style.top = document.documentElement.clientHeight+scrollTop-oDiv.offsetHeight+"px";
            startMove(document.documentElement.clientHeight+scrollTop-oDiv.offsetHeight);
        }

        function startMove(target){
            clearInterval(timer);
            // timer = setInterval(function(){
            //     var oDiv = document.getElementById("div1");
            //     var speed;
            //     var len = parseInt(getStyle(oDiv,"left"));
            //     if(target > len)
            //     {
            //         speed = 7;
            //     }
            //     else
            //     {
            //         speed = -7
            //     }

            //     if(target == len)
            //     {
            //         clearInterval(timer);
            //     }
            //     else
            //     {
            //         if(Math.abs(target-len)<=speed)
            //         {
            //             oDiv.style.left = target+"px";
            //             clearInterval(timer);
                        
            //         }
            //         else
            //         {
            //             oDiv.style.left = len+speed+"px";
            //         }
            //     }
            // },30);

            // timer = setInterval(function(){
            //     var oDiv = document.getElementById("div1");
            //     var len = parseInt(getStyle(oDiv,"left"));

            //     var speed = (target-len)/10;
            //     speed = speed>0?Math.ceil(speed):Math.floor(speed);

            //     if(target == len)
            //     {
            //         clearInterval(timer);
            //     }
            //     else
            //     {
            //         oDiv.style.left = len + speed + "px";
            //     }
            // },30);

            timer = setInterval(function(){
                var oDiv = document.getElementById("div1");
                var speed = 0;

                if(alpha < target)
                {
                    speed = 5;
                }
                else
                {
                    speed = -5;
                }

                if(alpha == target)
                {
                    clearInterval(timer);
                }
                else
                {   
                    alpha = alpha+speed;
                    oDiv.style.filter = "alpha(opacity:"+alpha+")";
                    oDiv.style.opacity= alpha/100;
                }
            },30)

            // timer = setInterval(function(){
            //     var oDiv = document.getElementById("div1");
            //     var speed = (target-oDiv.offsetTop)/6;
            //     speed = speed>0?Math.ceil(speed):Math.floor(speed);

            //     if(target == oDiv.offsetTop)
            //     {
            //         clearInterval(timer);
            //     }
            //     else
            //     {
            //         oDiv.style.top = oDiv.offsetTop+speed+"px";
            //     }
            // },30);
        }

        function getStyle(obj,name){
            if(obj.currentStyle)
            {
                return obj.currentStyle[name];
            }
            else
            {
                return getComputedStyle(obj,null)[name];
            }
        }
        
    </script>
    <style type="text/css">
        *{margin:0;padding:0;border:0;}
        /*#div1{width:150px;height:200px;position:absolute;background:red;left:-150px;}
        #div1 span{width:20px;height:60px;background:green;position:absolute;top:70px;right:-20px;}*/

        #div1{width:200px;height:200px;position:absolute;left:20px;top:100px;background:red;filter:alpha(opacity:30); opacity:0.3;}

        /*body{height:3000px;}
        #div1{width:100px;height:150px;position:absolute;background:red;bottom:0px;right:0px;}*/
    </style>
    </head>
    <body>
        <div id="div1">
            
        </div>
    </body>
</html>