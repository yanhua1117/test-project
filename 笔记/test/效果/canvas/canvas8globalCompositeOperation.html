<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<canvas id="canvas" style="display: block;margin:0 auto;border:1px solid #000"></canvas>
		<div id="links" style="text-align: center;margin:20px">
			<a href="#">source-over</a>
			<a href="#">source-atop</a>
			<a href="#">source-in</a>
			<a href="#">source-out</a>
			<a href="#">destination-over</a>
			<a href="#">destination-atop</a>
			<a href="#">destination-in</a>
			<a href="#">destination-out</a>
			<a href="#">lighter</a>
			<a href="#">copy</a>
			<a href="#">xor</a>
		</div>
	</body>

	<script type="text/javascript">
		var WINDOW_WIDTH = 1200;
		var WINDOW_HEIGHT = 800;
		var p = Math.PI;
		
		window.onload = function(){
			draw("source-over");
			var arr = document.getElementById("links").getElementsByTagName("a");
			for (var i=0;i<arr.length;i++) {
				arr[i].onclick = function(){
					draw(this.text);
					return false;
				};
			}
		}
		
		function draw(str){
			var canvas = document.getElementById("canvas");
			var context = canvas.getContext("2d");
			canvas.width = WINDOW_WIDTH;
			canvas.height = WINDOW_HEIGHT;
			context.clearRect(0,0,WINDOW_WIDTH,WINDOW_HEIGHT);
			
			//draw title
			context.font = "bold 40px Arial";
			context.textAlign = "center";
			context.textBaseline = "middle";
			context.fillStyle = "#058";
			context.fillText("globalCompositeOperation="+str,canvas.width/2,60);
			
			//draw a rect
			context.fillStyle = "blue";
			context.fillRect(300,150,500,500);
			
			//draw a triangle
			context.fillStyle = "red";
			context.globalCompositeOperation = str;
			context.beginPath();
			context.moveTo(700,250);
			context.lineTo(1000,750);
			context.lineTo(400,750);
			context.closePath();
			context.fill();
		}		
		
	</script>
</html>
